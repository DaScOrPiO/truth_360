<% layout("layouts/boilerplate") %>
<link rel="stylesheet" href="/styles/general/event-styles.css" />
<h1 class="px-5 py-3">All Locations</h1>

<div id="map" style="width: 100%; height: 500px"></div>
<div class="my-5 mx-3">
  <a class="button-x d-flex justify-content-center" href="locations/new">
    <i class="material-symbols-outlined mx-2"> add </i>
    Add new
  </a>
</div>

<ul id="content-container">
  <% for(let i = 0; i < data2.length; i++) { %>
  <div class="card mb-3">
    <div class="row">
      <div class="col-md-4 event-container">
        <img class="img-fluid" alt="" src="<%= data2[i].images[0].url %>" />
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title"><%= data2[i].title %></h5>
          <p class="card-text"><%= data2[i].description %></p>
          <p class="card-text">
            <small class="text-muted"><%= data2[i].location %></small>
          </p>
          <a class="button" href="locations/<%= data2[i]._id %>/show"
            >View <%= data2[i].title %></a
          >
        </div>
      </div>
    </div>
  </div>
  <% } %>
</ul>

<div class="search-container d-flex justify-content-center align-items-center">
  <i class="material-symbols-outlined fs-1 search-icon">search</i>
  <div class="input-group mb-3 no-view input-container">
    <input
      type="text"
      class="form-control search-input"
      name="location_name"
      id="search"
      placeholder="Search location"
      aria-label="movie-search"
      aria-describedby="button-addon2"
    />
    <button class="button-x" type="button" id="button-addon2">Search</button>
  </div>
</div>

<section
  class="search-section d-flex flex-wrap justify-content-center px-5 py-3 rounded-3 d-none"
  id="search-section"
></section>

<div class="d-flex justify-content-center align-items-center w-100">
  <button class="shadow fw-bolder" id="load-more">Load More</button>
</div>

<script>
  const Token = '<%-process.env.Campgroud_map_token%>';
  const points = <%- JSON.stringify(locations) %>;
  const mainData = <%- JSON.stringify(locations) %>;
  const moreData = <%- JSON.stringify(data2) %>;
  let totalItems = <%- totalItems %>;
  let items_per_page = <%- items_per_page %>;
</script>

<script src="/Javascripts/clusterMap.js"></script>
<script src="/Javascripts/locations.js"></script>
<script src="/Javascripts/location-search.js"></script>
